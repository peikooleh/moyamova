/* ==========================================================
 * –ü—Ä–æ–µ–∫—Ç: MOYAMOVA
 * –§–∞–π–ª: i18n.js
 * –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
 * –í–µ—Ä—Å–∏—è: 1.0
 * –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-11-17
 * ========================================================== */

(function () {
  'use strict';

  // ------------------------------------------------------------
  // –°–ª–æ–≤–∞—Ä–∏
  // ------------------------------------------------------------
  window.I18N = {
    ru: {
      // === auto: donate ===
      donateTitle: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
      donateLegalNote: "–í–∞—à–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã–º –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–ø–ª–∞—Ç–æ–π —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ —É—Å–ª—É–≥.",
      donateMonoTitle: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ä–µ–∑ Monobank",
      donateMonoOpen: "–û—Ç–∫—Ä—ã—Ç—å Monobank",
      donatePaypalTitle: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ä–µ–∑ PayPal",
      donatePaypalOpen: "–û—Ç–∫—Ä—ã—Ç—å PayPal",
      donateThanks: "–ö–∞–∂–¥—ã–π –¥–æ–Ω–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å MOYAMOVA ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–ª–æ–≤–∞—Ä–∏, —É–ª—É—á—à–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã–º –æ—Ç —Ä–µ–∫–ª–∞–º—ã. –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –ø–æ–¥–¥–µ—Ä–∂–∫—É!",
      ariaBack: "–ù–∞–∑–∞–¥",
      ariaClose: "–ó–∞–∫—Ä—ã—Ç—å",
      ariaDicts: "–°–ª–æ–≤–∞—Ä–∏",
      ariaFav: "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ",
      ariaGuide: "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
      ariaHome: "–ì–ª–∞–≤–Ω–∞—è",
      ariaMenu: "–ú–µ–Ω—é",
      ariaMistakes: "–ú–æ–∏ –æ—à–∏–±–∫–∏",
      ariaStats: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
      btnCheckUpdates: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è",
      btnExport: "–≠–∫—Å–ø–æ—Ä—Ç",
      btnImport: "–ò–º–ø–æ—Ä—Ç",
      menuAppVersion: "–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
      menuBackup: "–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ",
      menuLevel: "–†–µ–∂–∏–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏",
      menuTheme: "–¢–µ–º–∞",
      menuUiLang: "–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
      menuUpdates: "–û–±–Ω–æ–≤–ª–µ–Ω–∏—è",
      // === training prefs (PWA/TWA) ===
      menuFocus: "–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è",
      focusSets: "–°–µ—Ç—ã",
      focusContext: "–ö–æ–Ω—Ç–µ–∫—Å—Ç",
      menuTrainingMode: "–†–µ–∂–∏–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
      trainTranslate: "–ü–µ—Ä–µ–≤–æ–¥",
      trainReverse: "–û–±—Ä–∞—Ç–Ω—ã–π",
      trainSetsNav: "–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å–µ—Ç–∞–º",
      trainAuto: "–ê–≤—Ç–æ",
      legalTerms: "–£—Å–ª–æ–≤–∏—è",
      legalPrivacy: "–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å",
      legalImpressum: "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",
      // === filters ===
      filtersBtn: "–§–∏–ª—å—Ç—Ä—ã",
      filtersTitle: "–§–∏–ª—å—Ç—Ä—ã",
      filtersLevels: "–£—Ä–æ–≤–Ω–∏",
      filtersTopics: "–¢–µ–º—ã",
      filtersNoFilter: "–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞",
      filtersReset: "–°–±—Ä–æ—Å–∏—Ç—å",
      filtersApply: "–ü—Ä–∏–º–µ–Ω–∏—Ç—å",
      filtersVirtualTitle: "–§–∏–ª—å—Ç—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
      filtersVirtualText: "–í –ò–∑–±—Ä–∞–Ω–Ω–æ–º –∏ –ú–æ–∏—Ö –æ—à–∏–±–∫–∞—Ö —Ç—Ä–µ–Ω–∏—Ä—É—é—Ç—Å—è –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.",
      filtersPrepsTitle: "–§–∏–ª—å—Ç—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
      filtersPrepsText: "–î–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è ¬´–ü—Ä–µ–¥–ª–æ–≥–∏¬ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.",
      // aliases (older keys used in some builds)
      filtersDisabledTitle: "–§–∏–ª—å—Ç—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
      filtersDisabledPreps: "–î–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è ¬´–ü—Ä–µ–¥–ª–æ–≥–∏¬ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.",
      filtersEmpty: "–ü–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º –Ω–µ—Ç —Å–ª–æ–≤.",
      filtersOpen: "–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",

    },
    uk: {
      // === auto: donate ===
      donateTitle: "–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç",
      donateLegalNote: "–í–∞—à –¥–æ–Ω–∞—Ç —î –¥–æ–±—Ä–æ–≤—ñ–ª—å–Ω–∏–º —ñ –Ω–µ —î –æ–ø–ª–∞—Ç–æ—é —Ç–æ–≤–∞—Ä—ñ–≤ —á–∏ –ø–æ—Å–ª—É–≥.",
      donateMonoTitle: "–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ —á–µ—Ä–µ–∑ Monobank",
      donateMonoOpen: "–í—ñ–¥–∫—Ä–∏—Ç–∏ Monobank",
      donatePaypalTitle: "–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ —á–µ—Ä–µ–∑ PayPal",
      donatePaypalOpen: "–í—ñ–¥–∫—Ä–∏—Ç–∏ PayPal",
      donateThanks: "–ö–æ–∂–µ–Ω –¥–æ–Ω–∞—Ç –¥–æ–ø–æ–º–∞–≥–∞—î –Ω–∞–º —Ä–æ–∑–≤–∏–≤–∞—Ç–∏ MOYAMOVA ‚Äî –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ —Å–ª–æ–≤–Ω–∏–∫–∏, –ø–æ–∫—Ä–∞—â—É–≤–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è —ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –≤—ñ–ª—å–Ω–∏–º –≤—ñ–¥ —Ä–µ–∫–ª–∞–º–∏. –î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É!",
      ariaBack: "–ù–∞–∑–∞–¥",
      ariaClose: "–ó–∞–∫—Ä–∏—Ç–∏",
      ariaDicts: "–°–ª–æ–≤–Ω–∏–∫–∏",
      ariaFav: "–í–∏–±—Ä–∞–Ω–µ",
      ariaGuide: "–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è",
      ariaHome: "–ì–æ–ª–æ–≤–Ω–∞",
      ariaMenu: "–ú–µ–Ω—é",
      ariaMistakes: "–ú–æ—ó –ø–æ–º–∏–ª–∫–∏",
      ariaStats: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
      btnCheckUpdates: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è",
      btnExport: "–ï–∫—Å–ø–æ—Ä—Ç",
      btnImport: "–Ü–º–ø–æ—Ä—Ç",
      menuAppVersion: "–í–µ—Ä—Å—ñ—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É",
      menuBackup: "–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è",
      menuLevel: "–†–µ–∂–∏–º —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ",
      menuTheme: "–¢–µ–º–∞",
      menuUiLang: "–ú–æ–≤–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É",
      menuUpdates: "–û–Ω–æ–≤–ª–µ–Ω–Ω—è",

      // === training prefs (PWA/TWA) ===
      menuFocus: "–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—è",
      focusSets: "–°–µ—Ç–∏",
      focusContext: "–ö–æ–Ω—Ç–µ–∫—Å—Ç",
      menuTrainingMode: "–†–µ–∂–∏–º —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è",
      trainTranslate: "–ü–µ—Ä–µ–∫–ª–∞–¥",
      trainReverse: "–ó–≤–æ—Ä–æ—Ç–Ω–∏–π",
      trainSetsNav: "–ü–µ—Ä–µ—Ö—ñ–¥ –ø–æ —Å–µ—Ç–∞—Ö",
      trainAuto: "–ê–≤—Ç–æ",
      // === training prefs (PWA/TWA) ===
      menuFocus: "–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—è",
      focusSets: "–°–µ—Ç–∏",
      focusContext: "–ö–æ–Ω—Ç–µ–∫—Å—Ç",
      menuTrainingMode: "–†–µ–∂–∏–º —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è",
      trainTranslate: "–ü–µ—Ä–µ–∫–ª–∞–¥",
      trainReverse: "–ó–≤–æ—Ä–æ—Ç–Ω–∏–π",
      trainSetsNav: "–ü–µ—Ä–µ—Ö—ñ–¥ –ø–æ —Å–µ—Ç–∞—Ö",
      trainAuto: "–ê–≤—Ç–æ",
      legalTerms: "–£–º–æ–≤–∏",
      legalPrivacy: "–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å",
      legalImpressum: "–Æ—Ä–∏–¥–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è",
    
      // === filters ===
      filtersBtn: "–§—ñ–ª—å—Ç—Ä–∏",
      filtersTitle: "–§—ñ–ª—å—Ç—Ä–∏",
      filtersLevels: "–†—ñ–≤–Ω—ñ",
      filtersTopics: "–¢–µ–º–∏",
      filtersNoFilter: "–ë–µ–∑ —Ñ—ñ–ª—å—Ç—Ä–∞",
      filtersReset: "–°–∫–∏–Ω—É—Ç–∏",
      filtersApply: "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏",
      filtersVirtualTitle: "–§—ñ–ª—å—Ç—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ",
      filtersVirtualText: "–í –û–±—Ä–∞–Ω–æ–º—É —Ç–∞ –ú–æ—ó—Ö –ø–æ–º–∏–ª–∫–∞—Ö —Ç—Ä–µ–Ω—É—é—Ç—å—Å—è –≤—Å—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Å–ª–æ–≤–∞. –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è.",
      filtersPrepsTitle: "–§—ñ–ª—å—Ç—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ",
      filtersPrepsText: "–î–ª—è –≤–ø—Ä–∞–≤–∏ ¬´–ü—Ä–∏–π–º–µ–Ω–Ω–∏–∫–∏¬ª —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.",
      // aliases (older keys used in some builds)
      filtersDisabledTitle: "–§—ñ–ª—å—Ç—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ",
      filtersDisabledPreps: "–î–ª—è –≤–ø—Ä–∞–≤–∏ ¬´–ü—Ä–∏–π–º–µ–Ω–Ω–∏–∫–∏¬ª —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.",
      filtersEmpty: "–ó–∞ –≤–∏–±—Ä–∞–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –Ω–µ–º–∞—î —Å–ª—ñ–≤.",
      filtersOpen: "–í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏",
}
  };

  // ------------------------------------------------------------
  // Helpers
  // ------------------------------------------------------------
  window.I18N_getLang = function () {
    try {
      const A = window.App || {};
      const l =
        (A.settings && (A.settings.lang || A.settings.uiLang)) ||
        document.documentElement.getAttribute('lang') ||
        'ru';
      return String(l).toLowerCase() === 'uk' ? 'uk' : 'ru';
    } catch (_) {
      return 'ru';
    }
  };

  window.I18N_t = function (key) {
    const lang = window.I18N_getLang();
    try {
      const dict = (window.I18N && window.I18N[lang]) || {};
      if (Object.prototype.hasOwnProperty.call(dict, key)) return String(dict[key]);
    } catch (_) {}
    try {
      const dict = (window.I18N && window.I18N['ru']) || {};
      if (Object.prototype.hasOwnProperty.call(dict, key)) return String(dict[key]);
    } catch (_) {}
    return key;
  };

  window.applyI18n = function (scope) {
    const root = scope || document;
    if (!root) return;
    root.querySelectorAll('[data-i18n]').forEach(function (el) {
      const k = el.getAttribute('data-i18n');
      if (!k) return;
      const val = window.I18N_t(k);
      if (val !== k) el.textContent = val;
    });
    root.querySelectorAll('[data-i18n-aria]').forEach(function (el) {
      const k = el.getAttribute('data-i18n-aria');
      if (!k) return;
      const val = window.I18N_t(k);
      if (val !== k) el.setAttribute('aria-label', val);
    });
  };

  // ------------------------------------------------------------
  // –ü–µ—Ä–≤–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
  // ------------------------------------------------------------
  try {
    document.addEventListener('DOMContentLoaded', function () {
      try { window.applyI18n(); } catch (_) {}
    });
    window.addEventListener('lexitron:ui-lang-changed', function () {
      try { window.applyI18n(); } catch (_) {}
    });
    document.addEventListener('lexitron:ui-lang-changed', function () {
      try { window.applyI18n(); } catch (_) {}
    });
  } catch (_) {}

  // --- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ---
  setTimeout(function () {
    try { window.applyI18n(document); } catch (_) {}
  }, 500);

  // ------------------------------------------------------------
  // üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –∫ –Ω–æ–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º DOM
  // ------------------------------------------------------------
  (function enableAutoI18n() {
    if (!('MutationObserver' in window)) return;

    const observer = new MutationObserver(function (mutations) {
      for (const mutation of mutations) {
        for (const node of mutation.addedNodes) {
          if (node.nodeType !== 1) continue; // —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç—ã
          if (
            node.hasAttribute('data-i18n') ||
            node.hasAttribute('data-i18n-aria') ||
            node.querySelector('[data-i18n], [data-i18n-aria]')
          ) {
            try {
              window.applyI18n && window.applyI18n(node);
            } catch (err) {
              console.warn('Auto-i18n failed:', err);
            }
          }
        }
      }
    });

    observer.observe(document.body, {
      childList: true,
      subtree: true
    });

    console.info('‚úÖ Auto-i18n observer active');
  })();

})(); // üî∏ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π (function(){ ... }) –±–ª–æ–∫ i18n.js
/* ========================= –ö–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞: i18n.js ========================= */
